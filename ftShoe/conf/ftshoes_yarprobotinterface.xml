<?xml version="1.0" encoding="UTF-8" ?>
<robot name="ftShoes">

<!-- First level devices section - force-torque-sensors -->
<device type="canBusAnalogSensor" name="ftShoe_Left_Front">
    <param name="canbusDevice"> "ecan" </param>
    <param name="physDevice"> "ecan" </param>
    <param name="canDeviceNum"> 0 </param>
    <param name="canAddress"> 0x01 </param>
    <param name="format"> 16 </param>
    <param name="channels"> 6 </param>
    <param name="period"> 1 </param>
    <param name="useCalibration"> 1 </param>
    <param name="diagnostic"> 1 </param>
</device>
<device type="canBusAnalogSensor" name="ftShoe_Left_Rear">
    <param name="canbusDevice"> "ecan" </param>
    <param name="physDevice"> "ecan" </param>
    <param name="canDeviceNum"> 0 </param>
    <param name="canAddress"> 0x0D </param>
    <param name="format"> 16 </param>
    <param name="channels"> 6 </param>
    <param name="period"> 1 </param>
    <param name="useCalibration"> 1 </param>
    <param name="diagnostic"> 1 </param>
</device>
<device type="canBusAnalogSensor" name="ftShoe_Right_Front">
    <param name="canbusDevice"> "ecan" </param>
    <param name="physDevice"> "ecan" </param>
    <param name="canDeviceNum"> 0 </param>
    <param name="canAddress"> 0x02 </param>
    <param name="format"> 16 </param>
    <param name="channels"> 6 </param>
    <param name="period"> 1 </param>
    <param name="useCalibration"> 1 </param>
    <param name="diagnostic"> 1 </param>
</device>
<device type="canBusAnalogSensor" name="ftShoe_Right_Rear">
    <param name="canbusDevice"> "ecan" </param>
    <param name="physDevice"> "ecan" </param>
    <param name="canDeviceNum"> 0 </param>
    <param name="canAddress"> 0x03 </param>
    <param name="format"> 16 </param>
    <param name="channels"> 6 </param>
    <param name="period"> 1 </param>
    <param name="useCalibration"> 1 </param>
    <param name="diagnostic"> 1 </param>
</device>

<!-- Second level devices section - ftshoe -->
<device name="ftShoe_l" type="ftshoe">
    <param name="period"> 10 </param>
    <param name="name"> /ft/ftShoe_Left/analog:o </param>
    <!--fts_offset: express (in meters) the origin of heel fts in forefoot fts SoR -->
    <param name="fts_offset">(0.0725, -0.1255737, 0.0)</param>
    <!--rear_fts_to_out_R: Rotation matrix from heel fts SoR to output SoR -->
    <!--In this case Z pointing up, X pointing forward and Y following right-hand convention -->
    <param name="rear_fts_to_out_R">(-0.500, -0.866, 0.000,
                                      0.866, -0.500, 0.000,
                                      0.000,  0.000, 1.000)
    </param>
    <!--inSitu calibration matrices.-->
    <param name="useInSituCalibration"> false </param>
    <!--This matrices applies to the calibrated fts signals, than be sure to set to 1 the useCalibration parameter of both devices-->
    <group name="inSituMatrices">
        <param name="front_fts"> () </param>
        <param name="rear_fts"> () </param>
    </group>
    <action phase="startup" level="5" type="attach">
        <paramlist name="networks">
            <elem name="front_ft"> ftShoe_Left_Front </elem>
            <elem name="rear_ft"> ftShoe_Left_Rear </elem>
        </paramlist>
    </action>
    <action phase="shutdown" level="5" type="detach"/>
</device>
<device name="ftShoe_r" type="ftshoe">
    <param name="period"> 10 </param>
    <param name="name"> /ft/ftShoe_Right/analog:o </param>
    <!--fts_offset: express (in meters) the origin of heel fts in forefoot fts SoR -->
    <param name="fts_offset">(0.0725, -0.1255737, 0.0)</param>
    <!--rear_fts_to_out_R: Rotation matrix from heel fts SoR to output SoR -->
    <!--In this case Z pointing up, X pointing forward and Y following right-hand convention -->
    <param name="rear_fts_to_out_R">(-0.500, -0.866, 0.000,
                                      0.866, -0.500, 0.000,
                                      0.000,  0.000, 1.000)
    </param>
    <!--inSitu calibration matrices.-->
    <param name="useInSituCalibration"> true </param>
    <!--This matrices applies to the calibrated fts signals, than be sure to set to 1 the useCalibration parameter of both devices-->
    <group name="inSituMatrices">
        <param name="front_fts"> (0.735087440947875, 0.0154343158598511, 0.000424089270311016, -0.239072291304070, 0.748606518328611, 0.265614778648267,
                                  0.105826133673328, 0.999965168015949, 0.0326372342424194, -0.466046077371773, 1.02221514161460, 0.276310680187827,
                                 -0.0192897857199748, 0.0245501411582298, 1.00548794299933, -0.651682754058186, 0.00992620448930381, 0.351667479387692,
                                  0.00768615739900146, 0.0627853623265499, -0.00349390513864912, 0.921200951220564, 0.0454568122763060, -0.0127626081386760,
                                 -0.0552698044940209, 0.00346967835481862, -0.00117606673755423, -0.0412648313886732, 0.959265710217934, -0.142966960413695,
                                 -0.00139719700747814, 0.00645348470219132, -0.000416397281161208, -0.0565049387397447, -0.00933406911043930, 0.933862266066233)
        </param>
        <param name="rear_fts"> (0.920459723630694, 0.0571379713129850, 0.000587266568629167, -1.95265231636175, -1.63520574844239, 0.951063188283754,
                                 0.0815894297130298, 1.00601925660014, -0.0223729764153260, 0.244258888891837, 2.25455816231626, -0.0571370736214405,
                                 0.00479362424106852, 0.0204070811760447, 1.01487693280835, -0.612504576822445, 0.333266817532795, -0.140362254379193,
                                 0.0147344114414594, 0.0595871254662770, -0.00354939248673705, 1.04828757632416, 0.0617521332113449, -0.100820105528399,
                                -0.0592375385811709, -0.000810872085740540, -0.00129743121336557, 0.188685093821921, 1.28279371886595, -0.128042897845497,
                                 0.000994445868206261, -0.00242887786804675, -0.000875878271813691, -0.00436308870978543, 0.0169822798689899, 0.961578647793237)
        </param>
    </group>
    <action phase="startup" level="5" type="attach">
        <paramlist name="networks">
            <elem name="front_ft"> ftShoe_Right_Front </elem>
            <elem name="rear_ft"> ftShoe_Right_Rear </elem>
        </paramlist>
    </action>
    <action phase="shutdown" level="5" type="detach"/>
</device>

<!-- Analog wrappers sections, required to forward devices data on dedicated yarp ports -->
<!-- Analog wrappers sections - ftshoe devices wrappers -->
<device name="ftSensWrapper" type="analogServer">
    <param name="period"> 10 </param>
    <param name="name"> /ft/ftShoe_Left/analog:o </param>
    <action phase="startup" level="5" type="attach">
        <paramlist name="networks">
            <elem name="FirstStrain"> ftShoe_l </elem>
        </paramlist>
    </action>
    <action phase="shutdown" level="5" type="detach"/>
</device>
<device name="ftSensWrapper" type="analogServer">
    <param name="period"> 10 </param>
    <param name="name"> /ft/ftShoe_Right/analog:o </param>
    <action phase="startup" level="5" type="attach">
        <paramlist name="networks">
            <elem name="FirstStrain"> ftShoe_r </elem>
        </paramlist>
    </action>
    <action phase="shutdown" level="5" type="detach"/>
</device>

<!-- Analog wrappers sections - ftSensors devices wrappers -->
<device name="ftSensWrapper" type="analogServer">
    <param name="period"> 10 </param>
    <param name="name"> /ft/ftShoe_Left_Front/analog:o </param>
    <action phase="startup" level="5" type="attach">
        <paramlist name="networks">
            <elem name="FirstStrain"> ftShoe_Left_Front </elem>
        </paramlist>
    </action>
    <action phase="shutdown" level="5" type="detach"/>
</device>
<device name="ftSensWrapper" type="analogServer">
    <param name="period"> 10 </param>
    <param name="name"> /ft/ftShoe_Left_Rear/analog:o </param>
    <action phase="startup" level="5" type="attach">
        <paramlist name="networks">
            <elem name="FirstStrain"> ftShoe_Left_Rear </elem>
        </paramlist>
    </action>
    <action phase="shutdown" level="5" type="detach"/>
</device>
<device name="ftSensWrapper" type="analogServer">
    <param name="period"> 10 </param>
    <param name="name"> /ft/ftShoe_Right_Front/analog:o </param>
    <action phase="startup" level="5" type="attach">
        <paramlist name="networks">
            <elem name="FirstStrain"> ftShoe_Right_Front </elem>
        </paramlist>
    </action>
    <action phase="shutdown" level="5" type="detach"/>
</device>
<device name="ftSensWrapper" type="analogServer">
    <param name="period"> 10 </param>
    <param name="name"> /ft/ftShoe_Right_Rear/analog:o </param>
    <action phase="startup" level="5" type="attach">
        <paramlist name="networks">
            <elem name="FirstStrain"> ftShoe_Right_Rear </elem>
        </paramlist>
    </action>
    <action phase="shutdown" level="5" type="detach"/>
</device>
</robot>
